const chai = require('chai');
const geoHashCompress = require('./geoHashCompress.js');

function reverse2DArray(array)
{
    let reversed = [];
    array.forEach((element)=>{
        reversed.push([element[1],element[0]])
    })
    return reversed
}

let geoFenceIndore = [
	[22.8725924, 75.4375024],
	[22.9105034, 75.4401784],
	[22.9185316, 75.4562348],
	[22.9287898, 75.4620329],
	[22.933696, 75.4789814],
	[22.9430622, 75.4767513],
	[22.9448463, 75.4553428],
	[22.9671468, 75.463817],
	[22.9707149, 75.4803194],
	[22.9872173, 75.4887936],
	[22.9872173, 75.4780894],
	[23.0063958, 75.4758593],
	[23.0179921, 75.4896856],
	[23.0072879, 75.4910237],
	[23.0086259, 75.5075261],
	[23.0438608, 75.5213525],
	[23.0402927, 75.5351788],
	[23.052335, 75.5467751],
	[23.0661614, 75.5498972],
	[23.0715135, 75.5699677],
	[23.089354, 75.5668456],
	[23.090692, 75.6252731],
	[23.0732975, 75.6279492],
	[23.0563491, 75.618583],
	[23.053227, 75.6270572],
	[23.01487, 75.6324093],
	[23.0090719, 75.6417755],
	[23.012194, 75.6466817],
	[23.0273584, 75.6395455],
	[23.0197762, 75.7300858],
	[23.0385087, 75.736776],
	[23.0402927, 75.7608606],
	[23.0322645, 75.7671048],
	[23.0443068, 75.8117059],
	[23.0353866, 75.8433727],
	[23.0416307, 75.8723635],
	[23.0037198, 75.8991242],
	[22.9818652, 75.9125046],
	[22.9827572, 75.9245469],
	[22.9497524, 75.9548757],
	[22.9479683, 75.9651339],
	[22.936372, 75.966026],
	[22.9252217, 75.9780683],
	[22.8752685, 75.9834204],
	[22.8748225, 75.9936787],
	[22.8467237, 76.0320356],
	[22.8302213, 76.0356037],
	[22.7735779, 76.0744067],
	[22.7352209, 76.086003],
	[22.7294227, 76.0935852],
	[22.7178264, 76.0909092],
	[22.7196105, 76.0958153],
	[22.7044461, 76.1020594],
	[22.7048921, 76.125252],
	[22.6924038, 76.1502287],
	[22.6973099, 76.1814495],
	[22.6794695, 76.201966],
	[22.6656431, 76.1881396],
	[22.6656431, 76.2108862],
	[22.6785774, 76.2247126],
	[22.6701032, 76.2305107],
	[22.6558308, 76.2264966],
	[22.6469106, 76.2438911],
	[22.6201499, 76.2291727],
	[22.6192579, 76.2166844],
	[22.6259481, 76.2122243],
	[22.6281781, 76.1983979],
	[22.5996334, 76.1872476],
	[22.6058776, 76.1765433],
	[22.6103377, 76.1876936],
	[22.6201499, 76.1818955],
	[22.621042, 76.1707452],
	[22.6428965, 76.1876936],
	[22.6313002, 76.1680691],
	[22.6348683, 76.1506747],
	[22.6281781, 76.1515667],
	[22.62461, 76.162271],
	[22.6205959, 76.1578109],
	[22.6063236, 76.1662851],
	[22.6125677, 76.1426465],
	[22.5933892, 76.1430925],
	[22.6045395, 76.1359563],
	[22.6054316, 76.1274821],
	[22.5982954, 76.125698],
	[22.6072156, 76.1181159],
	[22.6032015, 76.1087496],
	[22.5956193, 76.1198999],
	[22.584023, 76.1136557],
	[22.5951733, 76.1087496],
	[22.5907132, 76.1033975],
	[22.6058776, 76.0819889],
	[22.5866991, 76.0882331],
	[22.5875911, 76.0632564],
	[22.5697506, 76.084219],
	[22.5630605, 76.1056275],
	[22.5505721, 76.085557],
	[22.5287176, 76.0779747],
	[22.5354078, 76.0628103],
	[22.5318397, 76.0298055],
	[22.4992808, 76.0271294],
	[22.4881305, 76.0364957],
	[22.4809944, 76.0538901],
	[22.4564637, 76.0556742],
	[22.4586938, 76.0431858],
	[22.4399613, 76.0342656],
	[22.4466515, 76.0128571],
	[22.4225669, 76.0079509],
	[22.4408533, 75.9687019],
	[22.4243509, 75.9165186],
	[22.4136466, 75.9080444],
	[22.389562, 75.9084904],
	[22.3837639, 75.855415],
	[22.4056184, 75.8375746],
	[22.4082945, 75.8268703],
	[22.390454, 75.8125979],
	[22.3730596, 75.7800391],
	[22.3636934, 75.7501563],
	[22.3721676, 75.7207196],
	[22.3445149, 75.65917],
	[22.3355946, 75.6524798],
	[22.3561112, 75.6453436],
	[22.3561112, 75.6377614],
	[22.3454069, 75.6324093],
	[22.3436228, 75.6043106],
	[22.349867, 75.6016345],
	[22.348975, 75.6123388],
	[22.3654774, 75.6087707],
	[22.3645854, 75.5944983],
	[22.3793038, 75.5771039],
	[22.3779657, 75.5592635],
	[22.3958062, 75.5516813],
	[22.3966982, 75.5458832],
	[22.4047264, 75.5503433],
	[22.4132006, 75.5454372],
	[22.4256889, 75.5623856],
	[22.4560177, 75.5717519],
	[22.4908066, 75.5637236],
	[22.4974968, 75.5543574],
	[22.5166753, 75.5579254],
	[22.5153372, 75.5717518],
	[22.5264875, 75.5980665],
	[22.544328, 75.5998505],
	[22.5590464, 75.5927143],
	[22.5701967, 75.5962824],
	[22.5626145, 75.6132308],
	[22.5626145, 75.6319633],
	[22.5697506, 75.6346394],
	[22.5684126, 75.6448976],
	[22.584023, 75.6783485],
	[22.6130137, 75.699311],
	[22.62238, 75.7140294],
	[22.6388824, 75.7126914],
	[22.6647511, 75.7060012],
	[22.660291, 75.6832546],
	[22.6402204, 75.6850387],
	[22.6491407, 75.7028791],
	[22.6366524, 75.7042171],
	[22.6304082, 75.6939589],
	[22.6388824, 75.6689822],
	[22.6362063, 75.6043107],
	[22.6544928, 75.5958365],
	[22.662075, 75.5820101],
	[22.6585069, 75.5677377],
	[22.6397744, 75.5632776],
	[22.6353143, 75.5365169],
	[22.6348683, 75.5271507],
	[22.660737, 75.5217986],
	[22.6473566, 75.5079722],
	[22.6478026, 75.4959299],
	[22.661629, 75.499052],
	[22.6674271, 75.5200145],
	[22.6977559, 75.5084182],
	[22.7102442, 75.5151084],
	[22.7308906, 75.5097556],
	[22.7332445, 75.5091454],
	[22.7343289, 75.5088642],
	[22.7370049, 75.4789815],
	[22.7651036, 75.4887937],
	[22.7726858, 75.4812115],
	[22.7762539, 75.4370564],
	[22.7976625, 75.4410705],
	[22.8110428, 75.4339343],
	[22.8128269, 75.425014],
	[22.8306673, 75.42323],
	[22.8364655, 75.4343803],
	[22.8485078, 75.4343803],
	[22.8547519, 75.4415165],
	[22.8650102, 75.4437466],
	[22.8725924, 75.4375024]
]
describe('geohash-compress',  function() {
    it('compress', async function() { 
        let gfh = await new geoHashCompress([reverse2DArray(geoFenceIndore)],7);   
        chai.assert.equal(Object.keys(gfh.compress()).length, 9674); 
    });   
    it('insideOrOutside', async function() {
        let gfh = await new geoHashCompress([reverse2DArray(geoFenceIndore)],7); 
        gfh.compress();
        chai.assert.equal( gfh.insideOrOutside(22.7418224,75.8814993),true );
    });
});